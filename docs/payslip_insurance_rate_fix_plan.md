# 급여명세서 4대보험 요율 수정 계획서

## 📋 문제 상황

최형호의 12월 급여명세서에서 세무사가 실제 발행한 금액과 시스템 계산 금액이 다름.

## 🔍 세무사 확인 요율 (2025년 기준)

### 1. 건강보험료
- **전체 요율**: 보수월액의 7.09%
- **근로자 부담**: 50% = **3.545%**
- **계산식**: `보수월액 × 0.03545` (원단위 절사)
- **예시**: 2,340,000원 × 0.03545 = 82,953원 → **82,950원** (3원 절사)

### 2. 장기요양보험료
- **전체 요율**: 건강보험료의 0.9182%
- **근로자 부담**: 50% = **건강보험료 × 0.9182%**
- **계산식**: `건강보험료 × 0.009182` (원단위 절사)
- **예시**: 82,950원 × 0.009182 = 761.3원 → **761원** (절사)
- ⚠️ **주의**: 보수월액 기준이 아닌 **건강보험료 기준**으로 계산

### 3. 고용보험료
- **근로자 부담**: 보수월액의 0.9% (실업급여 부담금)
- **계산식**: `보수월액 × 0.009` (원단위 절사)
- **예시**: 2,340,000원 × 0.009 = **21,060원**

### 4. 산재보험료
- **100% 사업주 부담** → 근로자 공제 0원
- 급여대장에 반영되지 않음

### 5. 국민연금
- **근로자 부담**: 보수월액의 4.5%
- **계산식**: `보수월액 × 0.045` (원단위 절사)
- **예외**: 만 60세 이상 자동 제외

## 🐛 현재 코드 문제점

### 문제 1: `src/app/salary/page.tsx`
```typescript
// ❌ 잘못된 계산
const longTermCareInsurance = round(baseAmount * 0.00459);
```
- **문제**: 보수월액 기준으로 직접 계산하고 있음
- **올바른 계산**: 건강보험료를 먼저 계산한 후, 그 값에 0.9182%를 곱해야 함

### 문제 2: `docs/insurance_rates_2025.md`
- 문서에 잘못된 요율이 기록되어 있음
- 장기요양보험: "근로자 0.459%" → 잘못된 정보

### ✅ 올바른 코드: `src/app/admin/payslip-generator/page.tsx`
```typescript
// ✅ 올바른 계산
const healthInsurance = Math.max(0, round(baseAmount * 0.03545) - 3);
const longTermCareInsurance = round(healthInsurance * 0.009182);
```

## 📝 수정 계획

### 1단계: `src/app/salary/page.tsx` 수정
- **파일**: `src/app/salary/page.tsx`
- **함수**: `calculateInsurance` (라인 413-444)
- **수정 내용**:
  ```typescript
  // 수정 전
  const longTermCareInsurance = round(baseAmount * 0.00459);
  
  // 수정 후
  const healthInsurance = Math.max(0, round(baseAmount * 0.03545) - 3);
  const longTermCareInsurance = round(healthInsurance * 0.009182);
  ```
- **이유**: 장기요양보험은 건강보험료의 0.9182%로 계산해야 함

### 2단계: `docs/insurance_rates_2025.md` 문서 업데이트
- **파일**: `docs/insurance_rates_2025.md`
- **수정 내용**:
  ```markdown
  - 장기요양보험: 근로자 0.459% (예: 2,340,000원 기준 10,740원)
  ```
  ↓
  ```markdown
  - 장기요양보험: 건강보험료의 0.9182% (예: 82,950원 기준 761원)
  ```
- **이유**: 계산 기준이 보수월액이 아닌 건강보험료임을 명확히 함

### 3단계: 검증
- 최형호 12월 급여명세서 재계산
- 세무사 발행 금액과 일치하는지 확인
  - 건강보험: 82,950원
  - 장기요양보험: 761원 (건강보험료 × 0.009182)
  - 고용보험: 21,060원

## 🔢 계산 검증

### 최형호 12월 급여 기준 (보수월액: 2,340,000원)

1. **건강보험료**
   - 계산: 2,340,000 × 0.03545 = 82,953원
   - 절사: 82,953 - 3 = **82,950원** ✅

2. **장기요양보험료**
   - 계산: 82,950 × 0.009182 = 761.3원
   - 절사: **761원** ✅
   - ⚠️ 기존 잘못된 계산: 2,340,000 × 0.00459 = 10,740원 (약 14배 차이)

3. **고용보험료**
   - 계산: 2,340,000 × 0.009 = **21,060원** ✅

4. **총 공제액**
   - 건강보험: 82,950원
   - 장기요양보험: 761원
   - 고용보험: 21,060원
   - **합계**: 104,771원

## 📌 참고사항

1. **계산 순서 중요**
   - 1단계: 건강보험료 계산
   - 2단계: 장기요양보험료 = 건강보험료 × 0.009182
   - 3단계: 고용보험료 계산

2. **원단위 절사**
   - 모든 계산은 `Math.floor()` 사용 (반올림 아님)
   - 건강보험은 추가로 3원 절사

3. **산재보험**
   - 근로자 공제 대상 아님
   - 사업주 100% 부담이므로 급여대장에 표시하지 않음

## ✅ 수정 완료 후 확인 사항

- [ ] `src/app/salary/page.tsx` 수정 완료
- [ ] `docs/insurance_rates_2025.md` 문서 업데이트 완료
- [ ] 최형호 12월 급여명세서 재계산 및 검증
- [ ] 세무사 발행 금액과 일치 확인
- [ ] 빌드 및 배포 완료
