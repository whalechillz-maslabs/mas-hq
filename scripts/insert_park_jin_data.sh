#!/bin/bash

# ================================================
# λ°•μ§„(JIN) λ°μ΄ν„° μ‚½μ… μ¤ν¬λ¦½νΈ
# ================================================

echo "π” λ°•μ§„(JIN) λ°μ΄ν„° μ‚½μ… μ‹μ‘..."

# 1. Supabase μ—°κ²° ν™•μΈ
echo "π“΅ Supabase μ—°κ²° ν™•μΈ μ¤‘..."
npx supabase status

if [ $? -ne 0 ]; then
    echo "β Supabase μ—°κ²° μ‹¤ν¨. Supabase ν”„λ΅μ νΈκ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈν•μ„Έμ”."
    exit 1
fi

# 2. SQL μ¤ν¬λ¦½νΈ μ‹¤ν–‰
echo "π—„οΈ λ°•μ§„ λ°μ΄ν„° μ‚½μ… μ¤‘..."
npx supabase db reset --linked

# 3. λ°•μ§„ λ°μ΄ν„° μ‚½μ…
echo "π‘¤ λ°•μ§„ μ§μ› μ •λ³΄ μ‚½μ…..."
npx supabase db push

# 4. λ°μ΄ν„° ν™•μΈ
echo "β… λ°μ΄ν„° μ‚½μ… μ™„λ£!"
echo ""
echo "π“‹ λ°•μ§„(JIN) κ³„μ • μ •λ³΄:"
echo "   - μ „ν™”λ²νΈ: 010-9132-4337"
echo "   - κΈ°λ³Έ ν¨μ¤μ›λ“: 91324337 (μ „ν™”λ²νΈ 8μλ¦¬)"
echo "   - κΈ°λ³Έ ν•€λ²νΈ: 1234"
echo "   - μ‚¬λ²: MASLABS-004"
echo "   - λ¶€μ„: OPν€"
echo "   - μ§μ±…: ννΈνƒ€μ„"
echo "   - μ‹κΈ‰: 12,000μ›"
echo "   - μ€ν–‰: μ°λ¦¬μ€ν–‰ 19007131399"
echo ""
echo "π― ν…μ¤νΈ λ°©λ²•:"
echo "   1. http://localhost:3000/login μ ‘μ†"
echo "   2. μ „ν™”λ²νΈ: 010-9132-4337"
echo "   3. ν¨μ¤μ›λ“: 91324337"
echo "   4. λλ” ν•€λ²νΈ: 1234"
echo ""
echo "π€ ν…μ¤νΈ μ‹¤ν–‰: npm run test:park-jin"
