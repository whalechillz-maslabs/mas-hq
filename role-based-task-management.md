# ì—­í• ë³„ ì—…ë¬´ ê¸°ë¡ ê¶Œí•œ ê´€ë¦¬ ë°©ì•ˆ

## ğŸ¯ ê¶Œí•œ ê´€ë¦¬ ì „ëµ

### 1. ì—­í• ë³„ ì ‘ê·¼ ê¶Œí•œ

#### **ê´€ë¦¬ì (admin)**
- âœ… **ëª¨ë“  ì§ì›ì˜ ì—…ë¬´ ê¸°ë¡ ì¡°íšŒ**
- âœ… **ëª¨ë“  ì—…ë¬´ ìœ í˜• ì‚¬ìš© ê°€ëŠ¥**
- âœ… **ì—…ë¬´ ìƒíƒœ ë³€ê²½ ê¶Œí•œ**
- âœ… **ì—…ë¬´ ì‚­ì œ ê¶Œí•œ**
- âœ… **í†µê³„ ëŒ€ì‹œë³´ë“œ ì „ì²´ ì¡°íšŒ**

#### **ë§¤ë‹ˆì €/íŒ€ì¥ (manager)**
- âœ… **ë³¸ì¸ íŒ€ì›ë“¤ì˜ ì—…ë¬´ ê¸°ë¡ ì¡°íšŒ**
- âœ… **íŒ€ ê´€ë ¨ ì—…ë¬´ ìœ í˜• ì‚¬ìš© ê°€ëŠ¥**
- âœ… **íŒ€ì› ì—…ë¬´ ìŠ¹ì¸/ë°˜ë ¤**
- âœ… **íŒ€ í†µê³„ ëŒ€ì‹œë³´ë“œ ì¡°íšŒ**

#### **íŒ€ ë¦¬ë” (team_lead)**
- âœ… **ë³¸ì¸ íŒ€ì›ë“¤ì˜ ì—…ë¬´ ê¸°ë¡ ì¡°íšŒ**
- âœ… **íŒ€ ê´€ë ¨ ì—…ë¬´ ìœ í˜• ì‚¬ìš© ê°€ëŠ¥**
- âœ… **íŒ€ì› ì—…ë¬´ ê²€í† **
- âœ… **íŒ€ ì„±ê³¼ ë¶„ì„**

#### **ì¼ë°˜ ì§ì› (employee)**
- âœ… **ë³¸ì¸ ì—…ë¬´ ê¸°ë¡ë§Œ ì¡°íšŒ**
- âœ… **ì¼ë°˜ ì—…ë¬´ ìœ í˜•ë§Œ ì‚¬ìš© ê°€ëŠ¥**
- âœ… **ë³¸ì¸ ì—…ë¬´ ìƒíƒœ ë³€ê²½**
- âŒ **ë‹¤ë¥¸ ì§ì› ì—…ë¬´ ì¡°íšŒ ë¶ˆê°€**

#### **íŒŒíŠ¸íƒ€ì„ ì§ì› (part_time)**
- âœ… **ë³¸ì¸ ì—…ë¬´ ê¸°ë¡ë§Œ ì¡°íšŒ**
- âœ… **ì œí•œëœ ì—…ë¬´ ìœ í˜•ë§Œ ì‚¬ìš© ê°€ëŠ¥**
- âœ… **ë³¸ì¸ ì—…ë¬´ ìƒíƒœ ë³€ê²½**
- âŒ **ë‹¤ë¥¸ ì§ì› ì—…ë¬´ ì¡°íšŒ ë¶ˆê°€**

### 2. ì—…ë¬´ ìœ í˜•ë³„ ê¶Œí•œ

#### **ê´€ë¦¬ì ì „ìš© ì—…ë¬´ ìœ í˜•**
- TL_SALES (íŒ€ë§¤ì¶œ ë‹¬ì„±ë¥  ì¸¡ì •)
- TL_YOY (YOY ì„±ì¥ë¥  ì¸¡ì •)
- MGMT_HIRING (ì±„ìš© TAT)
- MGMT_AUTOMATION (ìë™í™”/ìš´ì˜ ì§€í‘œ)

#### **íŒ€ì¥/ë§¤ë‹ˆì € ì „ìš© ì—…ë¬´ ìœ í˜•**
- TL_SCHEDULE (ìŠ¤ì¼€ì¤„ ì»¨íŒ)
- TL_CS (CS í•´ê²°)
- TL_TRAINING (êµìœ¡ ì´ìˆ˜)
- SALE_LEAD (íŒ€ì¥ ë¦¬ë“œ íŒë§¤)

#### **íŒ€ì› ì‚¬ìš© ê°€ëŠ¥ ì—…ë¬´ ìœ í˜•**
- TM_PHONE_SALE (ì „í™”/ì˜¨ë¼ì¸ ì„±ì‚¬)
- TM_OFFLINE_SALE (ì˜¤í”„ë¼ì¸ ë‹¨ë… ì„±ì‚¬)
- TM_OFFLINE_ASSIST (ì˜¤í”„ë¼ì¸ ë³´ì¡° ì°¸ì—¬)
- TM_SITA_SATISFACTION (ì‹œíƒ€ ë§Œì¡±ë„)
- TM_RETURN (ë°˜í’ˆ ë°œìƒ)
- TM_RETURN_DEFENSE (ë°˜í’ˆ ë°©ì–´ ì„±ê³µ)

#### **ëª¨ë“  ì‚¬ìš©ì ì‚¬ìš© ê°€ëŠ¥**
- ADMIN_DOCUMENT (ë¬¸ì„œ ì‘ì„±)
- ADMIN_MEETING (íšŒì˜ ì°¸ì„)
- TRAINING_ATTEND (êµìœ¡ ì°¸ì„)
- QUALITY_CHECK (í’ˆì§ˆ ê²€ì‚¬)

### 3. êµ¬í˜„ ë°©ì•ˆ

#### **ë°ì´í„°ë² ì´ìŠ¤ ìˆ˜ì¤€**
1. **RLS (Row Level Security) ì •ì±… ì„¤ì •**
2. **ì—…ë¬´ ìœ í˜•ë³„ ê¶Œí•œ í…Œì´ë¸” ìƒì„±**
3. **íŒ€ êµ¬ì¡° í…Œì´ë¸” ìƒì„±**

#### **ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì¤€**
1. **ì—­í• ë³„ í˜ì´ì§€ ì ‘ê·¼ ì œì–´**
2. **ì—…ë¬´ ìœ í˜• í•„í„°ë§**
3. **UI ê¶Œí•œë³„ í‘œì‹œ/ìˆ¨ê¹€**

### 4. ê¶Œí•œ ê´€ë¦¬ í…Œì´ë¸” êµ¬ì¡°

```sql
-- ì—…ë¬´ ìœ í˜•ë³„ ê¶Œí•œ í…Œì´ë¸”
CREATE TABLE operation_type_permissions (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    operation_type_id UUID REFERENCES operation_types(id),
    role_id UUID REFERENCES roles(id),
    can_create BOOLEAN DEFAULT false,
    can_read BOOLEAN DEFAULT false,
    can_update BOOLEAN DEFAULT false,
    can_delete BOOLEAN DEFAULT false,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- íŒ€ êµ¬ì¡° í…Œì´ë¸”
CREATE TABLE team_members (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    team_lead_id UUID REFERENCES employees(id),
    team_member_id UUID REFERENCES employees(id),
    department_id UUID REFERENCES departments(id),
    start_date DATE DEFAULT CURRENT_DATE,
    end_date DATE,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

### 5. ê¶Œí•œ í™•ì¸ ë¡œì§

```typescript
// ê¶Œí•œ í™•ì¸ í•¨ìˆ˜
const checkTaskPermission = async (userId: string, taskId: string, action: string) => {
  const user = await getCurrentUser();
  const task = await getTaskById(taskId);
  
  // ê´€ë¦¬ìëŠ” ëª¨ë“  ê¶Œí•œ
  if (user.role_id === 'admin') return true;
  
  // ë³¸ì¸ ì—…ë¬´ëŠ” ì½ê¸°/ìˆ˜ì • ê°€ëŠ¥
  if (task.employee_id === user.id && ['read', 'update'].includes(action)) return true;
  
  // íŒ€ì¥ì€ íŒ€ì› ì—…ë¬´ ì¡°íšŒ ê°€ëŠ¥
  if (user.role_id === 'manager' && isTeamMember(task.employee_id, user.id)) return true;
  
  return false;
};
```
